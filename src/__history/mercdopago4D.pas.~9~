unit mercdopago4D;

interface

uses
  mercdopago4D.interfaces,
  mercdopago4D.resources.interfaces;

type
  TMP4D = class(TInterfacedObject, iMP4D)
  private
    FConf: iConfiguration;
    FResources: iResources;

    constructor Create;
    destructor Destroy; override;
  public
    class function New: iMP4D;

    function Configuration: iConfiguration;
    function resources: iResources;
  end;

implementation

uses
  mercdopago4D.core.Configuration,
  mercdopago4D.resources.impl.resources;

function TMP4D.Configuration: iConfiguration;
begin
  Result := FConf;
end;

constructor TMP4D.Create;
begin
  FConf := TConfiguration.New;
end;

destructor TMP4D.Destroy;
begin

  inherited;
end;

class function TMP4D.New: iMP4D;
begin
  Result := Self.Create;
end;

function TMP4D.resources: iResources;
begin
  if not Assigned(FResources) then
    FResources := TResources.New(FConf);
  Result := FResources;
end;

end.
